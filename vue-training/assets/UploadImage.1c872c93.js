import{d as p,r as l,W as m,q as i,bL as E,i as f,f as c,o as g,c as v,a as u}from"./index.ecbb2424.js";import{a as _,u as D,s as B}from"./img.56d10c46.js";import{u as A}from"./image.684eab5f.js";const C=""+new URL("upload.0bb6a4ea.svg",import.meta.url).href,h={class:"input-container"},I=u("div",{class:"img-box"},[u("img",{src:C,alt:""}),u("br"),u("span",null,"\u70B9\u51FB\u9009\u62E9\u4E0A\u4F20\u7684\u56FE\u7247\u6587\u4EF6\uFF0C\u6216\u5C06\u56FE\u7247\u6587\u4EF6\u62D6\u62FD\u5230\u6B64\u5904\uFF0C\u4E5F\u53EF\u4EE5\u590D\u5236\u56FE\u7247\u5185\u5BB9\u7136\u540E\u5728\u6B64\u9875\u6309Ctrl+V\u7C98\u8D34\u4E0A\u4F20\uFF08\u5728\u7C98\u8D34\u4E4B\u524D\u8BF7\u4F7F\u7528\u9F20\u6807\u70B9\u51FB\u4E00\u4E0B\u53F3\u4FA7\u533A\u57DF\uFF09")],-1),w={class:"preview"},k=["src"],L=p({__name:"UploadImage",setup(y){const t=l(),r=l(),n=l(""),o=l(!1),F=A();async function d(e){let a=(await _()).data,s=(await D(e,a)).data;return s.err?(i({type:"error",message:"\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"}),Promise.reject("")):(await B(s.url,s.id)).data}return m(()=>{t.value.onchange=()=>{var e;(e=t.value.files)!=null&&e.length&&(o.value=!0,d(t.value.files[0]).then(a=>{n.value=a.url,o.value=!1,F.addImage(a),i({type:"success",message:"\u4E0A\u4F20\u6210\u529F"})},a=>{o.value=!1}))},r.value.onpaste=e=>{alert("\u7C98\u8D34\u4E0A\u4F20\u529F\u80FD\u5C1A\u672A\u5F00\u53D1\u5B8C\u6210"),console.log(e)}}),(e,a)=>{const s=E;return f((g(),v("div",{class:"uploadImg",ref_key:"uploadImgDiv",ref:r,"element-loading-text":"\u56FE\u7247\u4E0A\u4F20\u4E2D..."},[u("div",h,[I,u("input",{type:"file",ref_key:"fileInput",ref:t,accept:"image/*"},null,512)]),u("div",w,[u("img",{src:c(n),alt:""},null,8,k)])])),[[s,c(o)]])}}});export{L as default};
